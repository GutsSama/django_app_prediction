{% extends "base.html" %}

{% block content %}
<!-- templates/accounts/profile.html -->
<div class="flex items-center justify-center p-4">
  <div class="card bg-base-100 w-full max-w-md shadow-xl">
    <div class="card-body p-8">

      <h2 class="card-title text-2xl font-bold text-center mb-6">
        Profile
      </h2>

      <p class="text-lg mb-4">
        Utilisateur : <strong>{{ request.user.username }}</strong>
      </p>

      <!-- Formulaire profil -->
      <form method="post">
        {% csrf_token %}
        
        {% for field in form %}
          <div class="form-control w-full mb-4">
            
            <!-- Label -->
            <label class="label-text font-semibold" for="{{ field.id_for_label }}">
              <span class="label-text">{{ field.label }}</span>
              {% if field.field.required %}
                <span class="text-error">*</span>
              {% endif %}
            </label>
            
            <!-- Input -->
            {{ field }}
            
            <!-- Erreurs -->
            {% if field.errors %}
              <div class="text-error text-sm mt-1">
                {% for error in field.errors %}
                  <p>{{ error }}</p>
                {% endfor %}
              </div>
            {% endif %}
            
            <!-- Help text -->
            {% if field.help_text %}
              <small class="text-gray-500">{{ field.help_text }}</small>
            {% endif %}
          </div>
        {% endfor %}
        
        <button type="submit" class="btn btn-primary w-full mt-6">
          Enregistrer
        </button>
      </form>

      <!-- Séparation -->
      <div class="divider my-6">Sécurité</div>

      <!-- Bouton changement de mot de passe -->
      <a href="{% url 'password_change' %}" class="btn btn-outline btn-warning w-full">
        Changer le mot de passe
      </a>

    </div>
  </div>
</div>
{% endblock %}
